const ready=e=>{"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)};class Site{static empty(e){return!(e="string"==typeof e?document.querySelector(e):e)||void 0===e}static initSplideSliders(e,t,i,o){let a=e;return(a="object"!=typeof e?document.querySelector(e):a)&&void 0!==a?i&&"object"==typeof i?window.innerWidth>i.min_media||window.innerWidth<i.max_media?(window.innerWidth>i.min_media&&(i.options=t),e=new Splide(a,i.options),o&&e.sync(o),e):(i=new Splide(a,t),o&&i.sync(o),i):(e=new Splide(a,t),o&&e.sync(o),e):null}static initGlightbox(){GLightbox({touchNavigation:!0,loop:!1,autoplayVideos:!0})}static initToggleText(e){e=document.querySelectorAll(e);this.empty(e)||e.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),t.classList.toggle("--is_active");e=document.querySelector(t.getAttribute("data-target-block"));this.empty(e)||(e.style.maxHeight?(e.style.maxHeight=null,e.classList.remove("--is_open"),t.querySelector("p").textContent="Читать полностью"):(e.classList.add("--is_open"),e.style.maxHeight=e.scrollHeight+"px",t.querySelector("p").textContent="Скрыть"))})})}static initLazyLoadImages(){let t=new IntersectionObserver((e,i)=>{e.forEach(function(e){var t;(0<e.intersectionRatio||e.isIntersecting)&&(e=e.target,i.unobserve(e),e.hasAttribute("src")||(t=e.getAttribute("data-src"),e.setAttribute("src",t),e.onload=()=>{},i.unobserve(e)))})});document.querySelectorAll(".lazyload").forEach(e=>{t.observe(e)})}static initTooltips(){let n;document.addEventListener("mouseover",function(o){let a=o.target;if(a=a.hasAttribute("data-tooltip-text")?a:a.closest("*[data-tooltip-text]")){o=a.getAttribute("data-tooltip-text"),o=((n=document.createElement("div")).className="tooltip",n.innerHTML=o,document.body.append(n),a.getBoundingClientRect());let e=a.offsetWidth,t=0,i=((t=null==e?(e=0,o.left):o.left+(e-n.offsetWidth)/2)<0&&(t=0),o.top-n.offsetHeight-5);i<0&&(i=o.top+a.offsetHeight+5),n.style.left=t+"px",n.style.top=i+"px"}}),["mouseout","scroll"].forEach(e=>{document.addEventListener(e,function(e){n&&(n.remove(),n=null)})})}static initImageFigureWrapper(e){e=document.querySelectorAll(e);this.empty(e)||e.forEach(e=>{var t,i,o,a;this.empty(e.closest("figure"))&&(t=document.createElement("figure"),i=e.getAttribute("alt"),a=e.cloneNode(),(o=document.createElement("a")).className="glightbox",o.href=a.src,o.appendChild(a),t.appendChild(o),i&&((a=document.createElement("figcaption")).textContent=i,t.appendChild(a)),e.insertAdjacentElement("afterend",t),e.remove())})}static debounce(o,a,n){var s;return function(){var e=this,t=arguments,i=n&&!s;clearTimeout(s),s=setTimeout(function(){s=null,n||o.apply(e,t)},a||200),i&&o.apply(e,t)}}static initCorrectVh(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px"),window.addEventListener("resize",Site.debounce(()=>{var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")},400))}static initHeaderMove(){function e(e,t,i){var o=window.pageYOffset;70<window.scrollY?(t.style.paddingTop=i+"px",e.classList.add("--is_fixed")):(t.style.paddingTop="0px",e.classList.remove("--is_fixed")),a=o}let t=document.querySelector(".header");if(this.empty(t))return;let i=document.querySelector(".main"),o=0,a=(setTimeout(()=>{o=t.offsetHeight},200),window.addEventListener("resize",function(){o=t.offsetHeight}),window.pageYOffset);e(t,i,o),window.addEventListener("scroll",function(){e(t,i,o)})}static initMoveTop(){var e=document.querySelectorAll("*[data-scroll-top]");this.empty(e)||e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),window.scroll({top:0,left:0,behavior:"smooth"})})})}static initMobileMenu(){var e=document.querySelectorAll("*[data-mm-toggle]");this.empty(e)||(e.forEach(i=>{i.addEventListener("click",e=>{e.preventDefault();var e=i.dataset.mmToggle,t=document.querySelector(".mobile-menu");if(e)switch(e){case"close":t.classList.remove("--is_show"),t.classList.add("--is_fade"),document.documentElement.classList.remove("--mm_opened");break;case"open":t.classList.add("--is_show"),t.classList.remove("--is_fade"),document.documentElement.classList.add("--mm_opened")}})}),document.body.addEventListener("click",e=>{e=e?e.target:window.event.srcElement;e.classList.contains("mobile-menu")&&e.classList.contains("--is_show")&&(e.classList.remove("--is_show"),e.classList.add("--is_fade"),document.documentElement.classList.remove("--mm_opened"))}))}static initHeaderCatalog(){var e=document.querySelector(".header__catalog-btn");if(!this.empty(e)){let t=e.parentElement;e.addEventListener("click",e=>{e.preventDefault(),t.classList.contains("--is_active")?t.classList.remove("--is_active"):t.classList.add("--is_active")}),window.addEventListener("click",e=>{e.target.closest("."+t.className.split(" "))!==t&&t.classList.contains("--is_active")&&t.classList.remove("--is_active")})}}static initModals(e){e=document.querySelectorAll(e),e&&!1!==typeof e&&e.forEach(o=>{o.addEventListener("click",e=>{e.preventDefault();var t,i,e=o.getAttribute("data-modal");null!=e&&(i=o.getAttribute("data-modal_subject"),e=document.querySelector(e),i&&(t=e.querySelector('input[name="cms_field[Тип заявки]"]'))&&(t.value=i),(t=o.getAttribute("data-modal__title"))&&(i=e.querySelector(".modal__title"))&&(i.textContent=t),e.classList.add("--is_show"),e.classList.remove("--is_fade"),document.documentElement.classList.add("--modal_showed"))})}),e=document.querySelectorAll("*[data-modal-close]");e&&!1!==typeof e&&e.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();e=t.closest(".modal");document.querySelectorAll(".modal.--is_show").length<2&&document.documentElement.classList.remove("--modal_showed"),e.classList.remove("--is_show"),e.classList.add("--is_fade")})}),document.body.addEventListener("click",e=>{e=e?e.target:window.event.srcElement;e.classList.contains("modal")&&e.classList.contains("--is_show")&&(e.classList.remove("--is_show"),e.classList.add("--is_fade"),document.querySelectorAll(".modal.--is_show").length<2)&&document.documentElement.classList.remove("--modal_showed")})}static initFormCounter(){var e=document.querySelectorAll('*[data-form-counter="plus"],*[data-form-counter="minus"]');this.empty(e)||e.forEach(i=>{let o=i.parentElement.querySelector('input[data-form-counter="field"');i.addEventListener("click",e=>{if(!Site.empty(o)){var t=i.dataset.formCounter;switch(o.value=isNaN(+o.value)?0:o.value,t){case"minus":o.value=+o.value-1<0?1:+o.value-1;break;case"plus":o.value=+o.value+1}"createEvent"in document?((t=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),o.dispatchEvent(t)):o.fireEvent("input")}})})}static initToggleTabs(){let o=document.querySelectorAll("*[data-tab-toggle]");this.empty(o)||o.forEach(t=>{let i=t.closest("*[data-tab-container]");t.addEventListener("click",e=>{e.preventDefault();e=t.dataset.tabToggle;e&&(o.forEach(e=>{e.classList.remove("--is_active"),i.querySelector(e.dataset.tabToggle).classList.remove("--is_active")}),t.classList.add("--is_active"),i.querySelector(e).classList.add("--is_active"))})})}static initLazyYtFrames(){let a=document.querySelectorAll("*[data-lazy-video]");this.empty(a)||a.forEach(t=>{var e=t.querySelector("button");let i=t.querySelector("iframe"),o=t.dataset.lazyVideo;this.empty(e)&&this.empty(i)&&!o||(t.style.setProperty("--iframeBackImage",`url('https://img.youtube.com/vi/${o}/sddefault.jpg')`),e.addEventListener("click",e=>{e.preventDefault(),a.forEach(e=>{e.querySelector("iframe").contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo"}),"*"),e.classList.remove("--video_opened")});e=`https://www.youtube.com/embed/${o}?autoplay=1&rel=0&VQ=720&enablejsapi=1&origin=${window.location.protocol}//`+document.domain;i.src=e,t.classList.add("--video_opened")}))})}}ready(()=>{Site.initCorrectVh(),Site.initHeaderCatalog(),Site.initHeaderMove(),Site.initToggleText(".text__toggle"),Site.initMobileMenu(),Site.initModals("*[data-modal]"),Site.initGlightbox(),Site.initToggleTabs(),Site.initLazyYtFrames();function i(){var e=o.getBoundingClientRect().top,t=window.pageYOffset;t+window.innerHeight>t+e&&((t=document.createElement("script")).src="https://api-maps.yandex.ru/2.1/?lang=ru_RU",document.querySelector("body").appendChild(t),t.addEventListener("load",a),window.removeEventListener("scroll",i))}var e=Site.initSplideSliders(".product__info-slider-thumb",{fixedHeight:"55px",fixedWidth:"75px",perPage:1,perMove:1,gap:8,rewind:!0,arrows:!0,cover:!0,lazyLoad:"nearby",pagination:!1,isNavigation:!0,speed:2e3},null,null),t=Site.initSplideSliders(".product__info-slider-main",{type:"fade",perPage:1,perMove:1,height:"350px",lazyLoad:"nearby",rewind:!0,pagination:!1,arrows:!1,drag:!1,speed:3e3,breakpoints:{575:{height:"250px"}}},null,e),o=(Site.empty(t)||Site.empty(e)||(t.mount(),e.mount()),document.querySelector(".contacts")),a=(null==o&&(o=document.querySelector(".contacts_page")),function(){"undefined"!=typeof ymaps&&ymaps.ready(function(){var e=document.querySelector("#ya_map"),t=e.getAttribute("data-coordinates"),i=e.getAttribute("data-address"),o=e.getAttribute("data-center"),e=(o=(o=window.innerWidth<768?t:o)||t,new ymaps.Map(e,{center:o.split(","),zoom:17,controls:["zoomControl"]},{searchControlProvider:"yandex#search"})),o=new ymaps.GeoObject({geometry:{type:"Point",coordinates:t.split(",")},properties:{hintContent:i,balloonContent:i}},{iconLayout:"default#image",iconImageHref:"/img/marker_map.png",iconImageSize:[48,70],iconImageOffset:[-24,-55]});e.behaviors.disable("scroll"),e.geoObjects.add(o)})});null!=o&&(window.addEventListener("scroll",i),i())});